(self.webpackChunk_N_E=self.webpackChunk_N_E||[]).push([[775],{2431:function(){},8259:function(e,t,r){Promise.resolve().then(r.bind(r,4124))},4124:function(e,t,r){"use strict";r.r(t),r.d(t,{default:function(){return u}});var n=r(7437),s=r(2711),l=r(5278),i=r(789),a=r(1319),o=r(2265);function c(e){return!e||!e.startsWith("/")||e.startsWith("//")?"/home":e}function d(e){var t,r;let{period:l,minimal:i,autoCheckout:c,returnTo:d}=e,{userId:u}=(0,s.y)(),{data:x,isLoading:m}=(0,a.xn)({for:"user",pageSize:10}),[h,p]=(0,o.useState)(!1),b=(0,o.useRef)(null),g=(0,o.useMemo)(()=>{let e=Array.isArray(x)?x:[];if(0===e.length)return null;let t=e.find(e=>(null==e?void 0:e.key)==="pro_user"||(null==e?void 0:e.planKey)==="pro_user");if(t)return t;let r=e.find(e=>String((null==e?void 0:e.name)||"").toLowerCase().includes("pro"));if(r)return r;let n=e.find(e=>(null==e?void 0:e.key)!=="free_user"&&(null==e?void 0:e.planKey)!=="free_user");return null!=n?n:e[0]},[x]),f=(0,o.useMemo)(()=>"/subscribe-web/return?return=".concat(encodeURIComponent(d)),[d]);return(0,o.useEffect)(()=>{c&&!h&&u&&!m&&(null==g?void 0:g.id)&&window.setTimeout(()=>{var e;null===(e=b.current)||void 0===e||e.click(),p(!0)},50)},[c,h,u,m,null==g?void 0:g.id]),(0,n.jsx)("div",{className:i?"p-0":"bg-white rounded-2xl shadow-2xl p-6 md:p-8 mb-6",children:m?(0,n.jsx)("div",{className:i?"min-h-[50vh] flex items-center justify-center":"",children:(0,n.jsx)("p",{className:"text-base md:text-lg text-gray-700 text-center",children:"Loading…"})}):g?i?(0,n.jsx)("div",{className:"min-h-[50vh] flex items-center justify-center",children:(0,n.jsx)(a.Iv,{planId:String(g.id),planPeriod:l,newSubscriptionRedirectUrl:f,children:(0,n.jsx)("button",{ref:b,className:"sr-only",children:"Continue to Checkout"})})}):c?(0,n.jsxs)("div",{className:i?"min-h-[50vh] flex items-center justify-center":"max-w-xl mx-auto text-center",children:[(0,n.jsx)(a.Iv,{planId:String(g.id),planPeriod:l,newSubscriptionRedirectUrl:f,children:(0,n.jsx)("button",{ref:b,className:i?"sr-only":"w-full bg-purple-600 hover:bg-purple-700 text-white py-4 px-6 rounded-xl text-base md:text-lg font-semibold transition-colors",children:"Continue to Checkout"})}),!i&&(0,n.jsx)("p",{className:"text-center text-sm text-gray-600 mt-3",children:'If nothing happens, tap "Continue to Checkout".'})]}):(0,n.jsxs)("div",{className:"max-w-xl mx-auto",children:[(0,n.jsxs)("div",{className:"text-center mb-6",children:[(0,n.jsx)("h2",{className:"text-2xl md:text-3xl font-bold text-gray-900 mb-2",children:String(null!==(t=null==g?void 0:g.name)&&void 0!==t?t:"Pro")}),(0,n.jsx)("p",{className:"text-gray-600",children:String(null!==(r=null==g?void 0:g.description)&&void 0!==r?r:"Full access to all flows and practices")}),(null==g?void 0:g.amountFormatted)?(0,n.jsxs)("p",{className:"text-3xl md:text-4xl font-bold text-gray-900 mt-4",children:[String(g.amountFormatted),(0,n.jsx)("span",{className:"text-base font-medium text-gray-600",children:"/month"})]}):null]}),Array.isArray(null==g?void 0:g.features)&&g.features.length>0?(0,n.jsx)("div",{className:"rounded-2xl border border-gray-200 overflow-hidden mb-6",children:(0,n.jsx)("ul",{className:"divide-y divide-gray-200",children:g.features.slice(0,8).map(e=>{var t,r,s,l;return(0,n.jsx)("li",{className:"px-4 py-3 text-gray-800",children:String(null!==(r=null!==(t=null==e?void 0:e.name)&&void 0!==t?t:null==e?void 0:e.key)&&void 0!==r?r:"Feature")},String(null!==(l=null!==(s=null==e?void 0:e.id)&&void 0!==s?s:null==e?void 0:e.key)&&void 0!==l?l:null==e?void 0:e.name))})})}):(0,n.jsx)("div",{className:"rounded-2xl border border-gray-200 overflow-hidden mb-6",children:(0,n.jsxs)("ul",{className:"divide-y divide-gray-200",children:[(0,n.jsx)("li",{className:"px-4 py-3 text-gray-800",children:"Access to all flows and practices"}),(0,n.jsx)("li",{className:"px-4 py-3 text-gray-800",children:"Guided programs for stress, focus, and sleep"}),(0,n.jsx)("li",{className:"px-4 py-3 text-gray-800",children:"Track your progress"}),(0,n.jsx)("li",{className:"px-4 py-3 text-gray-800",children:"New content added regularly"})]})}),(0,n.jsx)(a.Iv,{planId:String(g.id),planPeriod:l,newSubscriptionRedirectUrl:f,children:(0,n.jsx)("button",{ref:b,className:"w-full bg-purple-600 hover:bg-purple-700 text-white py-4 px-6 rounded-xl text-base md:text-lg font-semibold transition-colors",children:"Upgrade Flow to Pro"})}),(0,n.jsx)("p",{className:"text-center text-sm text-gray-600 mt-3",children:"Opens in browser to complete payment"})]}):(0,n.jsx)("p",{className:"text-base md:text-lg text-gray-700 text-center",children:"No subscription plan found. Please check Clerk Billing plan availability."})})}function u(){let[e,t]=(0,o.useState)(!1),[r,a]=(0,o.useState)(!1),{signIn:u,isLoaded:x,setActive:m}=(0,l.zq)(),{userId:h}=(0,s.y)(),[p,b]=(0,o.useState)("");(0,o.useEffect)(()=>{let e=()=>{try{b(window.location.search||"")}catch(e){}};e();let t=()=>e();window.addEventListener("popstate",t);let r=history.pushState.bind(history),n=history.replaceState.bind(history),s=history;return s.pushState=function(t,n,s){r(t,n,s),e()},s.replaceState=function(t,r,s){n(t,r,s),e()},()=>{window.removeEventListener("popstate",t),s.pushState=r,s.replaceState=n}},[]);let g=(0,o.useMemo)(()=>new URLSearchParams(p),[p]),f="success"===g.get("subscription"),y=c(function(e){let t=e;for(let e=0;e<3&&t.startsWith("/subscribe");e+=1){let e=t.indexOf("?");if(-1===e)break;let r=new URLSearchParams(t.slice(e+1)).get("return");if(!r)break;try{t=decodeURIComponent(r)}catch(e){t=r}}return t}(c(g.get("return")))),v=(()=>{let e=(g.get("period")||"").toLowerCase();return"annual"===e||"year"===e||"yearly"===e?"annual":"month"})(),w=(()=>{let e=(g.get("autocheckout")||"").toLowerCase();return"1"===e||"true"===e})(),j=(()=>{let e=(g.get("minimal")||"").toLowerCase();return"1"===e||"true"===e||w})(),N=g.get("__clerk_ticket");return((0,o.useEffect)(()=>{let e=navigator.userAgent.toLowerCase();t(/android|webos|iphone|ipad|ipod|blackberry|iemobile|opera mini/i.test(e))},[]),(0,o.useEffect)(()=>{N&&x&&!h&&(r||(a(!0),u.create({strategy:"ticket",ticket:N}).then(e=>{if("complete"===e.status&&e.createdSessionId)return m({session:e.createdSessionId});console.error("Sign-in not complete:",e),a(!1)}).catch(e=>{console.error("Error processing sign-in token:",e),a(!1)})))},[N,x,u,m,h,r]),f)?(window.location.replace("/subscribe-web/return?return=".concat(encodeURIComponent(y))),null):(0,n.jsx)("div",{className:j?"bg-white":"flex flex-col bg-gradient-to-br from-orange-400 via-red-500 to-purple-600 p-4",style:{minHeight:"100dvh"},children:(0,n.jsxs)("div",{className:j?"w-full":"max-w-5xl w-full mx-auto",children:[!j&&(0,n.jsx)(n.Fragment,{children:(0,n.jsxs)("div",{className:"text-center mb-6 md:mb-8",children:[(0,n.jsx)("h1",{className:"text-3xl md:text-4xl lg:text-5xl font-bold text-white mb-3 md:mb-4",children:"Subscribe to Flow Premium"}),(0,n.jsx)("p",{className:"text-lg md:text-xl text-white opacity-90",children:"Unlock all meditation practices"})]})}),(0,n.jsx)(l.qI,{children:(0,n.jsx)("div",{className:"bg-white rounded-2xl shadow-2xl p-6 md:p-8 text-center",children:(0,n.jsx)("p",{className:"text-base md:text-lg text-gray-700",children:r?"Signing you in...":"Loading subscription options..."})})}),(0,n.jsxs)(l.a7,{children:[(0,n.jsxs)(i.CH,{children:[(0,n.jsx)(d,{period:v,minimal:j,autoCheckout:w,returnTo:y}),!j&&(0,n.jsx)("div",{className:"text-center",children:(0,n.jsx)("div",{className:"bg-white/20 backdrop-blur rounded-xl p-4 mb-4",children:e?(0,n.jsxs)(n.Fragment,{children:[(0,n.jsx)("p",{className:"text-white text-base md:text-lg font-semibold mb-2",children:"✅ After subscribing, return to Flow app"}),(0,n.jsx)("p",{className:"text-white text-sm md:text-base opacity-90",children:"Your subscription syncs automatically"})]}):(0,n.jsxs)(n.Fragment,{children:[(0,n.jsx)("p",{className:"text-white text-base md:text-lg font-semibold mb-2",children:"✅ After subscribing, access all premium content"}),(0,n.jsx)("p",{className:"text-white text-sm md:text-base opacity-90",children:"Your subscription activates immediately"})]})})})]}),(0,n.jsx)(i.tj,{children:(0,n.jsxs)("div",{className:"bg-white rounded-2xl shadow-2xl p-6 md:p-8 text-center",children:[(0,n.jsx)("h2",{className:"text-2xl md:text-3xl font-bold text-gray-800 mb-4",children:"Please Sign In First"}),(0,n.jsx)("p",{className:"text-base md:text-lg text-gray-700 mb-6",children:"You need to sign in to subscribe"}),(0,n.jsx)("button",{onClick:()=>window.location.href="/sign-in",className:"bg-purple-600 text-white px-8 py-4 rounded-xl font-bold hover:bg-purple-700 w-full text-base md:text-lg",children:"Sign In"})]})})]})]})})}},8533:function(e,t,r){"use strict";r.d(t,{j:function(){return s}});var n=r(2674);let s=()=>({pagesRouter:(0,n.useRouter)()})},9376:function(e,t,r){"use strict";var n=r(5475);r.o(n,"useParams")&&r.d(t,{useParams:function(){return n.useParams}}),r.o(n,"usePathname")&&r.d(t,{usePathname:function(){return n.usePathname}}),r.o(n,"useRouter")&&r.d(t,{useRouter:function(){return n.useRouter}}),r.o(n,"useSelectedLayoutSegments")&&r.d(t,{useSelectedLayoutSegments:function(){return n.useSelectedLayoutSegments}})}},function(e){e.O(0,[672,985,727,971,117,744],function(){return e(e.s=8259)}),_N_E=e.O()}]);